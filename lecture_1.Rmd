---
title: "Variation" 
author: "David Kane"
output:
  xaringan::moon_reader:
    lib_dir: libs
    seal: false
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      # ratio: '16:9' 
---
class: center, middle, inverse
background-image: url("sirens.jpg")
background-size: cover

<!-- Image credit: [National Gallery of Victoria](https://www.ngv.vic.gov.au/essay/j-w-waterhouses-ulysses-and-the-sirens-breaking-tradition-and-revealing-fears-2/) -->

# `r rmarkdown::metadata$title`
## `r rmarkdown::metadata$author`
---


<!-- [Provided guide from Bloom]

Data Science Teaching Demo Prompt
The teaching demonstration should be no more than 15-20 minutes with a live audience of 'mock students'. Assume that the audience is not familiar with data science at all and that this is an occasion to orient absolute beginner students to some of the foundational and fundamental concepts that underlie Data Science and make them excited to start learning more about the subject (and statistics in general). 

Your topic is variation/variability and the objectives you should cover in your demo:
Describe variation and variability
Their relation to standard distributions and the z-score
Bias-variance trade-off for machine learning models

You may take this topic in any direction you want assuming the parameters above. Please do not feel like you have to teach your students absolutely everything you know about the subject, but rather give them a clear basic understanding of the concepts.  Please ensure that there is a minimum of 5 minutes of time for questions from the 'students' within the 20-minute segment. The final 10-15  minutes of the 30-minute time slot will be spent on questions from the team about the teaching demo in general and asking you to reflect on it.

An ideal candidate will: 
Infuse their lesson with context and real-life examples
Engage learners regularly and creatively, checking to ensure they understand the material and participate in the session
Demonstrate knowledge and obvious passion for the content
-->


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
x <- read_csv("data/temperatures.csv")
```

```{r, echo=FALSE}

```


# Goals for this session

--

## Describe variation and variability

--

## Discuss the normal distribution and z-scores
--

## Explain the bias-variance trade-off 


---

# You are visiting a US city

## Average temperature is 60 degrees Fahrenheit

## What do you pack?

## What do you want to know?

---

# San Francisco

```{r}
x %>% 
  filter(station == "SFO") %>% 
  ggplot(aes(x = tmpf)) +
    geom_histogram(aes(y = after_stat(count/sum(count))),
                     alpha = 0.5, 
                     bins = 30, 
                     position = "identity") +
    scale_y_continuous(labels = scales::percent_format(decimals = 0)) +
    labs(title = "Hourly Temperature in San Francisco in 2017 -- 2021",
         subtitle = "A mostly normal distribution but with a right skew",
         x = "Temperature in Fahrenheit",
         y = NULL)
```

---

# Denver

```{r}
x %>% 
  filter(station == "DEN") %>% 
  ggplot(aes(x = tmpf)) +
    geom_histogram(aes(y = after_stat(count/sum(count))),
                     alpha = 0.5, 
                     bins = 30, 
                     position = "identity") +
    scale_y_continuous(labels = scales::percent_format(decimals = 0)) +
    labs(title = "Hourly Temperature in Denver in 2017 -- 2021",
         subtitle = "A flattish normal distribution but with a slight left skew",
         x = "Temperature in Fahrenheit",
         y = NULL)
```


---

# San Francisco and Denver

--

### What will the two distributions look like together?

--

```{r, out.width=400}
x %>% 
  ggplot(aes(x = tmpf, fill = station)) +
    geom_histogram(aes(y = after_stat(count/sum(count))),
                     alpha = 0.5, 
                     bins = 30, 
                     position = "identity") +
    scale_y_continuous(labels = scales::percent_format(decimals = 0)) +
    labs(title = "Hourly Temperature in San Francisco and Denver in 2017 -- 2021",
         subtitle = "The two distributions vary in terms of both center and spread",
         x = "Temperature in Fahrenheit",
         y = NULL)
```

---

## What statistics would help us to describe these distributions?

--

#### Calculating the average (or mean)

$$\bar{X} = \frac{\sum_{i=1}^{n} x_{i}}{n}$$
--

#### Calculating the variance

$$s^{2} = \frac{SS}{N - 1} = \frac{\sum (x_{i} - \bar{x})^{2}}{N - 1}$$

--

#### Calculating the standard deviation


$$s = \sqrt{s^{2}} = \sqrt{\frac{SS}{N - 1}} = \sqrt{\frac{\sum (x_{i} - \bar{x})^{2}}{N - 1}}$$

---

# Z-scores

--

### The most important part of any distribution is its center

--

### The second most important part of any distribution is its spread

--

### Transforming raw values to z-scores makes it easier to compare two distributions

--

### A z-score is the raw value, minus the mean and then divided by the standard deviation

--

$$z_i = \frac{x_{i} - \bar{x}}{s}$$
---

# Temperatures as z-scores

--

### What will those two distributions look like as z-scores?

--

```{r, out.width=400}
x %>% 
  group_by(station) %>% 
  mutate(zscore = (tmpf - mean(tmpf)) / sd(tmpf)) %>% 
  ggplot(aes(x = zscore, fill = station)) +
    geom_histogram(aes(y = after_stat(count/sum(count))),
                     alpha = 0.5, 
                     bins = 30, 
                     position = "identity") +
    scale_y_continuous(labels = scales::percent_format(decimals = 0)) +
    labs(title = "Z Score for Hourly Temperature in San Francisco and Denver in 2017 -- 2021",
         subtitle = "Distributions largely overlap, but they are still not perfectly normal",
         x = "Z Score",
         y = NULL)
```


---
## Bias versus variance

--

#### What are desirable properties for a weather forecasting model?

--

#### Accuracy and precision


--

```{r, , out.width = 300}
knitr::include_graphics("accuracy_vs_precision.jpeg")
```

Figure from [Statistical Inference via Data Science: A ModernDive into R and the Tidyverse](https://moderndive.com/).


---

# Summary

--

## Variation/variability are always important

--

## Data often appear "normal" and z-scores help

--

## There is always a trade-off between bias and variance

---
